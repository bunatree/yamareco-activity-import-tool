# Yamareco Activity Import Tool
## YAMAPからエクスポートされたデータをヤマレコに山行記録としてインポートするChrome拡張機能

この Chrome 拡張機能は、拙作の [YAMAP Activity Export Tool](https://github.com/bunatree/yamap-activity-export-tool) (参照: [YAMAPの活動日記をエクスポートするChrome拡張機能 (ヤマノート)](https://yamare.co/n3734)) によってエクスポートされた活動日記データをヤマレコに山行記録としてアップロードするためのお助けツールです。

YAMAP からのエクスポートしたデータをそのままヤマレコのへのインポートに使えたら面白いのではないかと考えて制作しました。

## 1. ダウンロード

ブラウザーで下記 URL にアクセスします。

[https://github.com/bunatree/yamareco-activity-import-tool/](https://github.com/bunatree/yamareco-activity-import-tool/)

緑色の [Code] ボタンをクリックして表示されたメニューの一番下にある [Download ZIP] をクリックします。

当拡張機能が ZIP ファイルとしてダウンロードされます。

ダウンロードした ZIP ファイルを展開し、任意のフォルダにコピーしてください。

## 2. ブラウザへのインストール

Chrome または Edge ブラウザを起動します。

### Google Chrome の場合

アドレスバーに chrome://extensions と入力して Enter キーを押すか、[設定] (右上の3つのドットアイコン) > [拡張機能] > [拡張機能を管理] を選択し、拡張機能ページを表示します。

当拡張機能の古いバージョンがインストール済みの場合は、先に古いバージョンをアンインストールしてください。

「デベロッパーモード」のスイッチをONにします。

「パッケージ化されていない拡張機能を読み込む」をクリックして、当拡張機能をコピーしたフォルダを選択します。

拡張機能のリストに「Yamareco Activity Import Tool」が表示されることを確認します。

ブラウザを再起動します。

### Microsoft Edge の場合

アドレスバーに edge://extensions と入力して Enter キーを押すか、[設定] (右上の3つのドットアイコン) > [拡張機能] を選択し、拡張機能ページを表示します。

当拡張機能の古いバージョンがインストール済みの場合は、先に古いバージョンをアンインストールしてください。

「開発者モード」のスイッチをONにします。

「展開して読み込み」をクリックして、当拡張機能をコピーしたフォルダを選択します。

拡張機能のリストに「Yamareco Activity Import Tool」が表示されることを確認します。

ブラウザを再起動します。

## 3. 使い方

ブラウザーでヤマレコの山行記録の作成/編集ページを開きます。

拡張機能のアイコン（緑の▲アイコン）をクリックしてメニューを表示して、「ドラッグ＆ドロップ activity.json」と表示された領域に、YAMAP からエクスポートした activity.json ファイルをドラッグ＆ドロップしてください。

ヤマレコの山行記録の作成/編集には、次の 5 つのステップがあります。

1. 日程・概要
2. 写真登録
3. ルート作成
4. コースタイム・感想
5. 公開設定

これらのステップの内、1、2、4 のステップのページで当拡張機能のメニューのボタンが青くなり、ボタンをクリックすると、activity.json の内容がテキスト入力欄などに反映します。

### Step 1: 日程・概要

ステップ 1 の「日程・概要」ページでは、「場所」「エリア選択」「ジャンル」「日程」に反映します。

- 場所 … 活動日記の「タイトル」です。
- エリア選択 … 活動日記の「地図」の名前から（ある程度※）自動判定して反映します。
- ジャンル … ヤマレコで定義されているジャンルの内、活動日記のタグに一致するものがあれば反映します（※）。活動日記で選択できる「活動タイプ」は反映しません。
- 日程 ... 活動日記の開始日と日数から自動判定して反映します。

対応表

|反映先|説明|
|場所|活動日記の「タイトル」を反映します|
|エリア選択|活動日記の「地図」の名前から（ある程度※）判定して反映します|
|ジャンル|ヤマレコのジャンルの内、活動日記のタグと部分一致するものがあれば反映します（※）|
|日程|活動日記の開始日と日数から判定して反映します。|

※ YAMAP の地図の数が膨大なため、対応しきれていません。神奈川県周辺は網羅したはずです。たぶん。

※ ジャンルは、部分一致する最初のものが選択されます。例えば、YAMAP の活動日記に「クライミング」タグがあると、ヤマレコの山行記録では「クライミング」を含む最初の選択肢である「アルパインクライミング」が選択されます。適時手動で変更してください。

### Step 2: 写真登録

ステップ 2 の「写真登録」ページでは、各写真の「コメント」に反映します。

写真がなければ「コメント」欄は表示されませんので、まずは写真を手動でアプロードしてください。

活動日記と山行記録とで枚数や順序が異なる場合はご注意ください。

例えば、YAMAP の活動日記に写真が 10 枚あり、ヤマレコの山行記録には写真を 5 枚しかアップロードしていない場合、写真 1 〜 5 のコメントが最初から順番に反映されます。

### Step 4: コースタイム・感想

ステップ 4 の「コースタイム・感想」ページでは、移行元の活動日記の「活動メモ」を「●●さんの感想」に反映します。

## 4. ライセンス

[Bleach free icon by Freepik - Flaticon](https://www.flaticon.com/free-icon/bleach_481058) … Free for personal and commercial purpose with attribution.

[Arrow free icon created by prinda895 - Flaticon](https://www.flaticon.com/free-icon/arrow_16111384) ... Free for personal and commercial purpose with attribution.

## 5. 動作確認

Browser: Google Chrome 128.0.6613.120 (Official Build) (arm64)

OS: macOS バージョン14.6.1（ビルド23G93）